Step: build-step-credential-initializer-chkfh:

{"level":"warn","ts":1554303396.132031,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/backport-container-name-fix\" is not a valid GitHub commit ID"}
{"level":"info","ts":1554303396.1337078,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}
Step: build-step-git-source-jstrachan-env-t1-staging-master-b5pm2:

{"level":"warn","ts":1554303397.042993,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/backport-container-name-fix\" is not a valid GitHub commit ID"}
{"level":"info","ts":1554303398.1321642,"logger":"fallback-logger","caller":"git-init/main.go:99","msg":"Successfully cloned \"https://github.com/jstrachan/env-t1-staging\" @ \"v0.0.22\" in path \"/workspace/source\""}
Step: build-step-place-tools:

Step: build-step-setup-**-git-credentials:

Generated Git credentials file /workspace/xdg_config/git/credentials
Step: build-step-build-helm-apply:

Modified file /workspace/source/env/Chart.yaml to set the chart to version 22
No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: jenkins-x http://chartmuseum.jenkins-x.io
Successfully added Helm repository jenkins-x.
Adding missing Helm repo: releases http://jenkins-x-chartmuseum:8080
Successfully added Helm repository releases.
Applying helm chart at . as release name ** to namespace **-staging
Ignoring templates/.gitignore
Wrote chart values.yaml values.yaml generated from directory tree
generated helm values.yaml

PipelineSecrets: {}
cleanup:
  Annotations:
    helm.sh/hook: pre-delete
    helm.sh/hook-delete-policy: hook-succeeded
  Args:
  - --cleanup
controllerbuild: {}
expose:
  Annotations:
    helm.sh/hook: post-install,post-upgrade
    helm.sh/hook-delete-policy: hook-succeeded
  Args:
  - --v
  - 4
  config:
    domain: 35.240.20.231.nip.io
    exposer: Ingress
    http: "true"
jenkins:
  Servers:
    Global: {}
prow: {}


Using values files: values.yaml
Applying chart overridesApplying generated chart . YAML via kubectl in dir: /tmp/helm-template-workdir-301204429/**/output
role.rbac.authorization.k8s.io/cleanup configured
rolebinding.rbac.authorization.k8s.io/cleanup configured
serviceaccount/cleanup configured
release.jenkins.io/demo277-0.0.2 configured
configmap/exposecontroller configured
role.rbac.authorization.k8s.io/expose configured
rolebinding.rbac.authorization.k8s.io/expose configured
serviceaccount/expose configured
service.serving.knative.dev/**-nodey71 created
release.jenkins.io/nodey71-0.0.3 created
Error from server (InternalError): error when creating "/tmp/helm-template-workdir-301204429/**/output/env/charts/demo277/templates/ksvc.yaml": Internal error occurred: admission webhook "webhook.serving.knative.dev" denied the request: mutation failed: must not set the field(s): spec.runLatest.configuration.revisionTemplate.spec.container.livenessProbe.httpGet.port, spec.runLatest.configuration.revisionTemplate.spec.container.readinessProbe.httpGet.port
error: upgrading helm chart '.': failed to run 'kubectl apply --recursive -f /tmp/helm-template-workdir-301204429/**/output -l jenkins.io/chart-release=** --namespace **-staging --wait --validate=false' command in directory '', output: 'role.rbac.authorization.k8s.io/cleanup configured
rolebinding.rbac.authorization.k8s.io/cleanup configured
serviceaccount/cleanup configured
release.jenkins.io/demo277-0.0.2 configured
configmap/exposecontroller configured
role.rbac.authorization.k8s.io/expose configured
rolebinding.rbac.authorization.k8s.io/expose configured
serviceaccount/expose configured
service.serving.knative.dev/**-nodey71 created
release.jenkins.io/nodey71-0.0.3 created
Error from server (InternalError): error when creating "/tmp/helm-template-workdir-301204429/**/output/env/charts/demo277/templates/ksvc.yaml": Internal error occurred: admission webhook "webhook.serving.knative.dev" denied the request: mutation failed: must not set the field(s): spec.runLatest.configuration.revisionTemplate.spec.container.livenessProbe.httpGet.port, spec.runLatest.configuration.revisionTemplate.spec.container.readinessProbe.httpGet.port'
{"component":"entrypoint","error":"wrapped process failed: exit status 1","level":"error","msg":"Error executing test process","time":"2019-04-03T14:56:58Z"}
